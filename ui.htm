<!DOCTYPE html>
 
<html lang="ru">
 
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Robot</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-gH2yIJqKdNHPEq0n4Mqa/HGKIhSkIHeL5AyhkYV8i59U5AR6csBvApHHNl/vI1Bx" crossorigin="anonymous">
</head>
 
<body>
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-A3rJD856KowSb7dwlZdYEkO39Gagi7vIsF0jrRAoQmDKKtQBHUuLZ9AsSv4jD4Xa" crossorigin="anonymous"></script>

    <span class="badge text-bg-danger" id="status">Disconnected</span>
    <button onclick="mySocket.send('Initialize');">Click Here</button>    
</body>
 
<script>
 
    var mySocket;
    const socketMessageListener = (event) => {
        console.log(event.data);
    };

    // Open
    const socketOpenListener = (event) => {
        $('#status').text('Connected');
        $('#status').removeClass('text-bg-danger');
        $('#status').addClass('text-bg-success');
    };

    // Closed
    const socketCloseListener = (event) => {
        if (mySocket) {
            $('#status').text('Disconnected');
            $('#status').addClass('text-bg-danger');
            $('#status').removeClass('text-bg-success');            
        }
        
            mySocket = new WebSocket('ws://localhost:8000');
            mySocket.addEventListener('open', socketOpenListener);
            mySocket.addEventListener('message', socketMessageListener);
            mySocket.addEventListener('close', socketCloseListener);

    };
    socketCloseListener();
</script>
 
</html>